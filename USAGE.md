# HH Watcher - Сбор вакансий с HeadHunter

## Описание

Система для автоматического сбора вакансий с HeadHunter за последние 24 часа по двум группам:

1. **Python Junior разработчики** - по всей России
2. **Закупки/Проекты/Продажи** - во Владивостоке

## Установка зависимостей

```bash
pip install -r requirements.txt
```

## Использование

### Основной сбор данных

```bash
python collect_vacancies.py
```

Этот скрипт:
- Собирает вакансии за последние 24 часа
- Создает отдельные файлы для каждой группы
- Сохраняет данные в CSV и JSON форматах
- Показывает статистику по собранным данным

### Тестирование

```bash
python test_collection.py
```

Быстрый тест сбора небольшого количества данных для проверки работоспособности.

### Прямой запуск API

```bash
python hh_api.py
```

Запуск только модуля сбора данных без дополнительной информации.

## Структура файлов результатов

После запуска в папке `data/` будут созданы файлы:

### CSV файлы (для Excel)
- `Закуп_Проекты_Продажи_Владивосток.csv` - вакансии во Владивостоке
- `Junior_Россия.csv` - Python Junior вакансии по России

### JSON файлы (для программного использования)
- `Закуп_Проекты_Продажи_Владивосток.json` - вакансии во Владивостоке
- `Junior_Россия.json` - Python Junior вакансии по России

## Формат данных

### CSV файлы содержат колонки:
- `id` - уникальный ID вакансии
- `Название вакансии` - название позиции
- `Ссылка` - прямая ссылка на вакансию
- `Доход` - информация о зарплате
- `Дата публикации` - когда была опубликована вакансия

### JSON файлы содержат:
```json
{
  "group_name": "Junior (Россия)",
  "total_count": 150,
  "updated_at": "2024-01-15T10:30:00",
  "vacancies": [
    {
      "id": "12345678",
      "Название вакансии": "Junior Python Developer",
      "Ссылка": "https://hh.ru/vacancy/12345678",
      "Доход": "от 80000 RUR",
      "Дата публикации": "2024-01-15 09:15"
    }
  ]
}
```

## Настройка

Основные настройки находятся в файле `config.py`:

- `QUERY_GROUPS` - группы запросов и регионы
- `ONLY_WITH_SALARY` - собирать только вакансии с указанной зарплатой
- `USER_AGENT` - идентификатор для API запросов

## Особенности

- ✅ Использует официальное API HeadHunter
- ✅ Автоматическая дедупликация вакансий
- ✅ Поддержка кодировки UTF-8 для корректного отображения в Excel
- ✅ Паузы между запросами для избежания блокировки
- ✅ Обработка ошибок сети
- ✅ Разделение данных по регионам

## Примеры использования

### Запуск ежедневного сбора
```bash
# Добавить в cron для автоматического запуска
0 9 * * * cd /path/to/project && python collect_vacancies.py
```

### Анализ данных в Python
```python
import json
from pathlib import Path

# Загрузить данные
with open('data/Junior_Россия.json', 'r', encoding='utf-8') as f:
    data = json.load(f)
    
print(f"Найдено {data['total_count']} вакансий")
for vacancy in data['vacancies'][:5]:
    print(f"- {vacancy['Название вакансии']}: {vacancy['Доход']}")
```

## Устранение неполадок

### Ошибка "pip не найден"
- Используйте `python -m pip install -r requirements.txt`
- Или установите pip отдельно

### Ошибки сети
- Проверьте интернет-соединение
- HeadHunter может временно блокировать запросы - подождите и повторите

### Проблемы с кодировкой
- Убедитесь, что файлы открываются с кодировкой UTF-8
- В Excel используйте "Данные" → "Из текста/CSV" и выберите UTF-8
